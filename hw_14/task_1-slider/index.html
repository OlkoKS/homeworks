<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./index.css">
</head>
<body>
<h3>Task 1</h3>
<h4>Slider</h4>
<section class="slider-section">
    <div class="slider-container">
        <div class="button-container">
            <span class="js--prev-button" id="prev-button">&lt;</span>
        </div>
        <div class="image-container">
            <img src="./images/1.jpg" alt="car" width="800px" height="600px">
            <ul class="slider-steps js--point-steps">
                <li id="1"></li>
                <li id="2"></li>
                <li id="3"></li>
            </ul>
        </div>
        <div class="button-container">
            <span class="js--next-button" id="next-button">&gt;</span>
        </div>
    </div>
</section>
<script>
    "use strict";

    const image = document.getElementsByTagName("img")[0];
    const prevImageButton = document.querySelector(".js--prev-button");
    const nextImageButton = document.querySelector(".js--next-button");
    const pointSwitches = document.querySelector(".js--point-steps");

    let imageNumber = 1;
    let step = 0;
    let currentPoint = 1;

    function showImage(step) {
        imageNumber += step;

        if (imageNumber > 1) {
            prevImageButton.style.display = "flex";
        } else {
            prevImageButton.style.display = "none";
        }

        if (imageNumber === 9) {
            nextImageButton.style.display = "none";
        } else {
            nextImageButton.style.display = "flex";
        }

        let imageURL = `./images/${imageNumber}.jpg`;

        image.setAttribute("src", imageURL);

        if (imageNumber % 3 === 1) {
            currentPoint = 1;
        } else if (imageNumber % 3 === 0) {
            currentPoint = 3;
        } else {
            currentPoint = 2;
        }

        changePointColor(currentPoint);
    }

    function getImageWithButton(event) {
        if (event.target.className === "js--next-button") {
            ++step;
            ++currentPoint;
        } else {
            --step;
            --currentPoint;
        }
        showImage(step);
        step = 0;
    }

    function getImageWithPoint(event) {
        step = event.target.id - currentPoint;
        currentPoint = event.target.id;
        showImage(step);
        step = 0;
    }

    function changePointColor(point) {
        switch (point) {
            case 1: {
                pointSwitches.children[0].style.backgroundColor = "orange";
                pointSwitches.children[1].style.backgroundColor = "lightgrey";
                pointSwitches.children[2].style.backgroundColor = "lightgrey";
                break;
            }
            case 2: {
                pointSwitches.children[0].style.backgroundColor = "lightgrey";
                pointSwitches.children[1].style.backgroundColor = "orange";
                pointSwitches.children[2].style.backgroundColor = "lightgrey";
                break;
            }
            case 3: {
                pointSwitches.children[0].style.backgroundColor = "lightgrey";
                pointSwitches.children[1].style.backgroundColor = "lightgrey";
                pointSwitches.children[2].style.backgroundColor = "orange";
                break;
            }
            default: {
                pointSwitches.children[0].style.backgroundColor = "orange";
                pointSwitches.children[1].style.backgroundColor = "lightgrey";
                pointSwitches.children[2].style.backgroundColor = "lightgrey";
            }
        }
    }

    prevImageButton.addEventListener("click", getImageWithButton);
    nextImageButton.addEventListener("click", getImageWithButton);
    pointSwitches.addEventListener("click", getImageWithPoint);
</script>
</body>
</html>