<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<h3>Task 1</h3>
<h4>Constructor "Student"</h4>
<script>
    "use strict"

    function Student(student) {
        const {name, surname, yearOfBirth, grades} = student;
        this.name = name;
        this.surname = surname;
        this.yearOfBirth = yearOfBirth;
        this.grades = [...grades];
        this.visiting = new Array(25);

        this.age = function () {
            let studentAge = new Date().getFullYear() - this.yearOfBirth;
            console.log(`Вік ${this.name} ${this.surname}: ${studentAge}`);
            return studentAge;
        }

        this.averageGrade = function () {
            let averageGrade = Math.round(this.grades.reduce((acc, item) => {
                return acc + item
            }, 0) / this.grades.length);

            console.log(`Середня оцінка студента ${this.name} ${this.surname}: ${averageGrade}`);
            return averageGrade;
        }

        this.present = function () {
            let nextValueIndex = this.visiting.findIndex(item => item === undefined);

            nextValueIndex === -1
                ? console.log('Внесено максимальну кількість значень відвідуваності.')
                : this.visiting[nextValueIndex] = true;

            return this;
        }

        this.absent = function () {
            let nextValueIndex = this.visiting.findIndex(item => item === undefined);

            nextValueIndex === -1
                ? console.log('Внесено максимальну кількість значень відвідуваності.')
                : this.visiting[nextValueIndex] = false;

            return this;
        }

        this.summary = function () {
            let averageGrade = this.averageGrade();
            let averageVisiting = this.visiting.filter(item => item === true).length / this.visiting.length;
            console.log(averageGrade);
            console.log(averageVisiting);

            if (averageGrade > 90 && averageVisiting > 0.9) {
                return 'Результат: Молодець!';
            } else if (averageGrade <= 90 && averageVisiting <= 0.9) {
                return 'Результат: Редиска!';
            } else {
                return 'Результат: Добре, але можна краще';
            }
        }
    }

    let studentData1 = {
        name: 'Олена',
        surname: 'Кирилюк',
        yearOfBirth: 2005,
        grades: [100, 90, 100, 80, 90, 70, 100, 90, 80, 100]
    }

    let student1 = new Student(studentData1);

    console.log(student1.present().present().present().present().absent());
    console.log(student1.present().present().present().absent().present());
    console.log(student1.present().present().absent().present().present());
    console.log(student1.present().absent().present().present().present());
    console.log(student1.absent().present().present().present().present());

    console.log(student1.present());

    console.log(student1.age());
    console.log(student1.averageGrade());
    console.log(student1.summary());


    let studentData2 = {
        name: 'Вадим',
        surname: 'Овдієнко',
        yearOfBirth: 2004,
        grades: [90, 100, 90, 80, 70, 90, 100, 90, 80, 100]
    }

    let student2 = new Student(studentData2);

    console.log(student2.present().present().present().present().present());
    console.log(student2.present().present().present().absent().present());
    console.log(student2.present().present().present().present().present());
    console.log(student2.present().present().present().present().present());
    console.log(student2.absent().present().present().present().present());
    console.log(student2.age());
    console.log(student2.averageGrade());
    console.log(student2.summary());

    let studentData3 = {
        name: 'Анна',
        surname: 'Марченко',
        yearOfBirth: 2003,
        grades: [90, 100, 100, 80, 70, 100, 90, 100, 100, 90, 100]
    }

    let student3 = new Student(studentData3);

    console.log(student3.present().present().present().present().present());
    console.log(student3.present().present().present().present().present());
    console.log(student3.present().present().present().present().present());
    console.log(student3.present().present().present().present().present());
    console.log(student3.absent().present().present().present().present());
    console.log(student3.age());
    console.log(student3.averageGrade());
    console.log(student3.summary());
</script>
</body>
</html>